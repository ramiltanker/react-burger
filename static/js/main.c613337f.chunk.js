(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{10:function(e,t,a){e.exports={feed:"Feed_feed__yvEC5",container:"Feed_container__1RF7a",box:"Feed_box__22dvl",orders:"Feed_orders__SQCtW",statistic:"Feed_statistic__2lw-g",processes:"Feed_processes__fE7sL",done:"Feed_done__3BwyD",done_list:"Feed_done_list__10zX7",done_li:"Feed_done_li__ift8U",in_work:"Feed_in_work__2rUlw Feed_done__3BwyD",in_work_list:"Feed_in_work_list__1d72v Feed_done_list__10zX7",done_all_time:"Feed_done_all_time__2oitg",number:"Feed_number__36gV-"}},107:function(e,t,a){e.exports={box:"ConstructorBurgerCard_box__1mvjO"}},108:function(e,t,a){e.exports={main:"Main_main__2DPGr"}},11:function(e,t,a){e.exports={header:"AppHeader_header__3weDU",container:"AppHeader_container__1Xy_O",nav:"AppHeader_nav__3-5pE",nav_link_contructor:"AppHeader_nav_link_contructor__3ircJ",nav_link_tape:"AppHeader_nav_link_tape__NyYkZ AppHeader_nav_link_contructor__3ircJ",personal_account:"AppHeader_personal_account__HV0LE AppHeader_nav_link_tape__NyYkZ AppHeader_nav_link_contructor__3ircJ",list:"AppHeader_list__Jf3Ua",li:"AppHeader_li__2R5bi",link_active:"AppHeader_link_active__1eeXV",profile_box:"AppHeader_profile_box__2tf45"}},111:function(e,t,a){e.exports={overlay:"ModalOverlay_overlay__1kT-P"}},12:function(e,t,a){e.exports={ingridients:"IngridientsIdPage_ingridients__296og",container:"IngridientsIdPage_container__qV4Gf",title:"IngridientsIdPage_title__10Om4",nutrients:"IngridientsIdPage_nutrients__37NfI",nutrient:"IngridientsIdPage_nutrient__1hX47",nutrient_title:"IngridientsIdPage_nutrient_title__3OMhg",nutrient_text:"IngridientsIdPage_nutrient_text__2aztQ"}},125:function(e,t,a){},13:function(e,t,a){e.exports={ingridients:"IngredientDetails_ingridients__2uMsW",container:"IngredientDetails_container__EBuzj",title:"IngredientDetails_title__CO72W",nutrients:"IngredientDetails_nutrients__3WO8Q",nutrient:"IngredientDetails_nutrient__kPiYk",nutrient_title:"IngredientDetails_nutrient_title__3CkZP",nutrient_text:"IngredientDetails_nutrient_text__tcjp2"}},14:function(e,t,a){e.exports={container:"FeedOrderModal_container__kzhQZ",info:"FeedOrderModal_info__t33DV",number:"FeedOrderModal_number__XjxT1",name:"FeedOrderModal_name__3DN_j",status:"FeedOrderModal_status__3t1G5",list:"FeedOrderModal_list__1iJgY",li:"FeedOrderModal_li__tRKP8",image:"FeedOrderModal_image__lNmcz",ing_name:"FeedOrderModal_ing_name__23rBM",price_box:"FeedOrderModal_price_box__1TBax",price:"FeedOrderModal_price__10Sp0",box:"FeedOrderModal_box__3aCk5"}},15:function(e,t,a){e.exports={container:"UserOrderModal_container__1cJaQ",info:"UserOrderModal_info__1Xtye",number:"UserOrderModal_number__2Gkxv",name:"UserOrderModal_name__33BWL",status:"UserOrderModal_status__2df8v",list:"UserOrderModal_list__2fXBX",li:"UserOrderModal_li__2xhOK",image:"UserOrderModal_image__3gsaZ",ing_name:"UserOrderModal_ing_name__5wcVJ",price_box:"UserOrderModal_price_box__1YS8n",price:"UserOrderModal_price__2wuAV",box:"UserOrderModal_box__1e7xQ"}},16:function(e,t,a){e.exports={container:"FeedOrderPage_container__1CGH6",info:"FeedOrderPage_info__2vxtf",number:"FeedOrderPage_number__1_EIa",name:"FeedOrderPage_name__6IPTk",status:"FeedOrderPage_status__2YHbp",list:"FeedOrderPage_list__yhy4Y",li:"FeedOrderPage_li__1UbuP",image:"FeedOrderPage_image__2LJpC",ing_name:"FeedOrderPage_ing_name__3BZ9_",price_box:"FeedOrderPage_price_box__2wLIV",price:"FeedOrderPage_price__3iXKg",box:"FeedOrderPage_box__s4-GE"}},17:function(e,t,a){e.exports={container:"UserOrderPage_container__3yC-w",info:"UserOrderPage_info__2kPxe",number:"UserOrderPage_number__2daGk",name:"UserOrderPage_name__3fNCI",status:"UserOrderPage_status__UBk4A",list:"UserOrderPage_list__1o34K",li:"UserOrderPage_li__31MJD",image:"UserOrderPage_image__17-JM",ing_name:"UserOrderPage_ing_name__Tte2D",price_box:"UserOrderPage_price_box__1h_06",price:"UserOrderPage_price__H_88c",box:"UserOrderPage_box__2QI01"}},19:function(e,t,a){e.exports={card:"FeedCard_card__2Apbv",link:"FeedCard_link__1Ef9d",box:"FeedCard_box__3CRYn",burger_info:"FeedCard_burger_info__qxTte",images_list:"FeedCard_images_list__3suFd",image_li:"FeedCard_image_li___kJZn",lastImage:"FeedCard_lastImage__2GoDr",image:"FeedCard_image__1_IOl",price_box:"FeedCard_price_box__1k9ie",price:"FeedCard_price__1E9hU",code:"FeedCard_code__136Y1",time:"FeedCard_time__2SkCS",name:"FeedCard_name__3lWFU",image_number:"FeedCard_image_number__3Rari",image_number_none:"FeedCard_image_number_none__2mfTz"}},196:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(46),s=a.n(c),i=a(6),o=a(30),d=(a(125),a(5)),l=a(7),u="wss://norma.nomoreparties.space",_="https://norma.nomoreparties.space/api",j=function(e,t,a){return fetch("".concat(_,"/auth/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:a})}).then((function(e){return 400===e.status?Promise.reject({message:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}):500===e.status?Promise.reject({message:"\u041f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}):e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(e){return e}))},b=function(e){return fetch("".concat(_,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return 403===e.status?Promise.reject({message:"jwt expired"}):e.json()})).then((function(e){return e}))},m=function(e,t){return fetch("".concat(_,"/auth/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(e){return e}))},O=function(e){return fetch("".concat(_,"/auth/token"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:e})}).then((function(e){return 401===e.status?Promise.reject({message:"Token is invalid"}):e.json()})).then((function(e){return e}))},p=function(e){return fetch("".concat(_,"/auth/logout"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(e){return e}))},f=function(e){return fetch("".concat(_,"/password-reset"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(e){return e}))},g=function(e,t,a){return fetch("".concat(_,"/auth/user"),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({email:t,name:a})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(e){return e}))},x=function(e,t){return fetch("".concat(_,"/password-reset/reset"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))})).then((function(e){return e}))},h=a(2);function v(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function y(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(a=Object(h.a)({path:"/"},a)).expires;if("number"==typeof n&&n){var r=new Date;r.setTime(r.getTime()+1e3*n),n=a.expires=r}n&&n.toUTCString&&(a.expires=n.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var s in a){c+="; "+s;var i=a[s];!0!==i&&(c+="="+i)}document.cookie=c}var N="USER_REGISTRATION_REQUEST",S="USER_REGISTRATION_SUCCES",E="USER_REGISTRATION_FAILED",I="GET_USER_REQUEST",C="GET_USER_SUCCES",T="GET_USER_FAILED",R="USER_LOGIN_REQUEST",k="USER_LOGIN_SUCCES",D="USER_LOGIN_FAILED",P="USER_LOGOUT_REQUEST",U="USER_LOGOUT_SUCCES",w="USER_LOGOUT_FAILED",F="TOKEN_CHECK_REQUEST",M="TOKEN_CHECK_SUCCES",A="TOKEN_CHECK_FAILED",G="FORGOT_PASSWORD_REQUEST",B="FORGOT_PASSWORD_SUCCES",q="FORGOT_PASSWORD_FAILED",L="RESET_PASSWORD_REQUEST",H="RESET_PASSWORD_SUCCES",J="RESET_PASSWORD_FAILED",W="UPDATE_USER_REQUEST",Q="UPDATE_USER_SUCCES",z="UPDATE_USER_FAILED",K=function e(){var t=v("accessToken");return function(a){a({type:I}),b(t).then((function(e){e&&e.success?a({type:C,user:e.user}):a({type:T})})).catch((function(t){if(a({type:T}),"jwt expired"===t.message){var n=localStorage.getItem("refreshToken");n&&a(function(e,t){return function(a){a({type:F}),O(e).then((function(e){e&&e.success?(y("accessToken",e.accessToken.split("Bearer ")[1],{}),localStorage.setItem("refreshToken",e.refreshToken),t(),a({type:M})):a({type:A})})).catch((function(e){a({type:A}),console.log(e)}))}}(n,e))}console.log(t)}))}},V=function(e){return function(t){t({type:P}),p(e).then((function(e){e&&e.success?(y("accessToken","",{expires:-1}),t({type:U})):t({type:A})})).catch((function(e){t({type:A}),console.log(e)}))}},X=function(){return fetch("".concat(_,"/ingredients"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(e){return e}))},Z=function(e,t){return fetch("".concat(_,"/orders"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({ingredients:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(e){return e}))},Y="GET_BURGER_INGRIDIENTS_REQUEST",$="GET_BURGER_INGRIDIENTS_SUCCESS",ee="GET_BURGER_INGRIDIENTS_FAILED",te="GET_BURGER_CONSTRUCTOR_REQUEST",ae="GET_BURGER_CONSTRUCTOR_SUCCESS",ne="GET_BURGER_CONSTRUCTOR_FAILED",re="GET_BURGER_CONSTRUCTOR_ADD_ITEM",ce="GET_BURGER_CONSTRUCTOR_DELETE_ITEM",se="MOVE_CONSTRUCTOR_ITEM",ie="POST_SEND_ORDER_REQUEST",oe="POST_SEND_ORDER_SUCCESS",de="POST_SEND_ORDER_FAILED",le="COST_TOTAL_PRICE",ue="DELETE_BURGER_CONSTRUCTOR_AFTER_ORDER",_e=a(11),je=a.n(_e),be=a(3),me=a(0),Oe=function(){var e=Object(l.h)(),t="/profile"===e.pathname,a="/feed"===e.pathname,n="/"===e.pathname;return Object(me.jsx)("header",{className:je.a.header,children:Object(me.jsxs)("div",{className:"".concat(je.a.container," mt-8 mb-8"),children:[Object(me.jsx)("nav",{className:je.a.nav,children:Object(me.jsxs)("ul",{className:je.a.list,children:[Object(me.jsx)("li",{className:je.a.li,children:Object(me.jsxs)(i.b,{className:"".concat(je.a.nav_link_contructor," ").concat(je.a.li," ").concat(n?je.a.link_active:je.a.nav_link_tape," text_type_main-default mr-15"),to:{pathname:"/",state:{from:e}},id:"constructor",children:["\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",Object(me.jsx)(be.BurgerIcon,{type:n?"secondary":"primary"})]})}),Object(me.jsx)("li",{className:je.a.li,children:Object(me.jsxs)(i.b,{className:"".concat(je.a.nav_link_tape," ").concat(je.a.li," ").concat(a?je.a.link_active:je.a.nav_link_tape," text_type_main-default mr-15"),to:{pathname:"/feed",state:{from:e}},id:"tape",children:["\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",Object(me.jsx)(be.ListIcon,{type:a?"secondary":"primary"})]})})]})}),Object(me.jsx)(be.Logo,{}),Object(me.jsx)("div",{className:je.a.profile_box,children:Object(me.jsxs)(i.b,{className:"".concat(je.a.personal_account," ").concat(je.a.li," ").concat(t?je.a.link_active:je.a.personal_account," text_type_main-default"),to:{pathname:"/profile",state:{from:e}},id:"profile",children:["\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",Object(me.jsx)(be.ProfileIcon,{type:t?"secondary":"primary"})]})})]})})},pe=a(21),fe=a.n(pe),ge=a(47),xe=a.n(ge),he=a(202),ve=o.c,ye=function(){return Object(o.b)()},Ne=function(e){var t=Object(l.h)(),a=(Object(l.g)(),ve((function(e){return e.burgerIngridients}))),n=a.burgerConstructorIngridients,c=a.bun,s=r.a.useMemo((function(){var e={};return n.forEach((function(t){e[t._id]||(e[t._id]=0),e[t._id]++})),c&&(e[c._id]=2),e}),[n,c]);var o=Object(he.a)({type:"ingridients",item:{_id:e.card._id,type:e.card.type,ing:e.card},collect:function(e){return{opacity:e.isDragging()?.5:1}}}),u=Object(d.a)(o,2),_=u[0].opacity,j=u[1];return Object(me.jsxs)(i.b,{className:xe.a.card,onClick:function(){e.handleOpenIngridientsModal(e.card)},ref:j,style:{opacity:_},to:{pathname:"/ingridients/".concat(e.card._id),state:{background:t}},children:[Object(me.jsx)(be.Counter,{count:s[e.card._id]}),Object(me.jsx)("img",{className:xe.a.image,src:e.card.image,alt:e.card.name}),Object(me.jsxs)("div",{className:xe.a.price_box,children:[Object(me.jsx)("p",{className:xe.a.price,children:e.card.price}),Object(me.jsx)(be.CurrencyIcon,{type:"primary"})]}),Object(me.jsx)("p",{className:xe.a.name,children:e.card.name})]})},Se=a(64),Ee=function(e){var t=ve((function(e){return e.burgerIngridients})).burgerIngridientsArr,a=(ye(),r.a.useState("buns")),n=Object(d.a)(a,2),c=n[0],s=n[1],i=t.filter((function(e){return"bun"===e.type})),o=t.filter((function(e){return"main"===e.type})),l=t.filter((function(e){return"sauce"===e.type})),u=Object(Se.a)({threshold:0}),_=Object(d.a)(u,3),j=_[0],b=_[1],m=(_[2],Object(Se.a)({threshold:0})),O=Object(d.a)(m,3),p=O[0],f=O[1],g=(O[2],Object(Se.a)({threshold:0})),x=Object(d.a)(g,3),h=x[0],v=x[1];x[2];return r.a.useEffect((function(){b?s("buns"):f?s("sauces"):v&&s("main")}),[b,v,f]),Object(me.jsxs)("section",{className:fe.a.burger_ingridients,"data-testid":"burger-ingridients",children:[Object(me.jsx)("h2",{className:"".concat(fe.a.title," mt-10 mb-5"),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(me.jsxs)("div",{className:fe.a.tabs,children:[Object(me.jsx)(be.Tab,{value:"buns",active:"buns"===c,onClick:s,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(me.jsx)(be.Tab,{value:"sauces",active:"sauces"===c,onClick:s,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(me.jsx)(be.Tab,{value:"main",active:"main"===c,onClick:s,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(me.jsxs)("div",{className:"".concat(fe.a.parts_shell," mt-10 pr-2"),children:[Object(me.jsxs)("div",{className:fe.a.parts_container,ref:j,id:"buns",children:[Object(me.jsx)("h2",{className:" ".concat(fe.a.parts_title_no_margin," mb-6 mt-10"),children:"\u0411\u0443\u043b\u043a\u0438"}),Object(me.jsx)("div",{className:fe.a.parts_box,children:i.map((function(t){return Object(me.jsx)(Ne,{card:t,handleOpenIngridientsModal:e.handleOpenIngridientsModal},t._id)}))})]}),Object(me.jsxs)("div",{className:fe.a.parts_container,ref:p,id:"sauces",children:[Object(me.jsx)("h2",{className:fe.a.parts_title,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(me.jsx)("div",{className:fe.a.parts_box,children:l.map((function(t){return Object(me.jsx)(Ne,{card:t,handleOpenIngridientsModal:e.handleOpenIngridientsModal},t._id)}))})]}),Object(me.jsxs)("div",{className:fe.a.parts_container,ref:h,id:"main",children:[Object(me.jsx)("h2",{className:fe.a.parts_title,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(me.jsx)("div",{className:fe.a.parts_box,children:o.map((function(t){return Object(me.jsx)(Ne,{card:t,handleOpenIngridientsModal:e.handleOpenIngridientsModal},t._id)}))})]})]})]})},Ie=a(203),Ce=a(42),Te=a.n(Ce),Re=a(107),ke=a.n(Re),De=function(e){var t=r.a.useRef(null),a=ye(),n=Object(he.a)({type:"constructor",item:{_id:e.item._id,type:e.item.type,ing:e.item,ingIndex:e.ingIndex},collect:function(e){return{opacity:e.isDragging()?.5:1}}}),c=Object(d.a)(n,2),s=c[0].opacity,i=c[1],o=Object(Ie.a)({accept:"constructor",hover:function(n,r){var c,s=n.ingIndex,i=e.ingIndex;if(s!==i){var o=null===(c=t.current)||void 0===c?void 0:c.getBoundingClientRect(),d=(o.bottom-o.top)/2,l=r.getClientOffset().y-o.top;s<i&&l<d||s>i&&l>d||(a({type:se,dragIndex:s,replacedIndex:i}),n.ingIndex=i)}}});return i((0,Object(d.a)(o,2)[1])(t)),Object(me.jsxs)("div",{className:ke.a.box,ref:t,style:{opacity:s},"data-testid":"ingridient-card",children:[Object(me.jsx)(be.DragIcon,{type:"primary"}),Object(me.jsx)(be.ConstructorElement,{isLocked:!1,text:e.item.name,handleClose:e.close,price:e.item.price,thumbnail:e.item.image})]})},Pe=function(e){var t=ve((function(e){return e.burgerIngridients})),a=t.burgerConstructorIngridients,n=t.bun,c=t.totalPrice,s=Object(l.g)(),i=r.a.useState([]),o=Object(d.a)(i,2),u=o[0],_=o[1],j=ye(),b=Object(Ie.a)({accept:"ingridients",drop:function(e){!function(e){j({type:re,id:e._id,ingType:e.type,item:e.ing}),j({type:le})}(e)}}),m=Object(d.a)(b,2)[1];r.a.useEffect((function(){!function(){var e=a.filter((function(e){return"bun"!==e.type}));_(e)}()}),[a]);var O=r.a.useMemo((function(){return u&&u.map((function(e,t){return Object(me.jsx)(De,{item:e,ingIndex:t,close:function(){!function(e){j({type:ce,ingIndex:e}),j({type:le})}(t)}},t)}))}),[u]),p=r.a.useMemo((function(){var e;return e=a.map((function(e){return e._id})),n&&e.push(n._id,n._id),e}),[a,n]);return Object(me.jsxs)("section",{className:"".concat(Te.a.burger_constructor," mt-25 ml-10"),ref:m,"data-testid":"burger-constructor",children:[n.name&&Object(me.jsx)("div",{className:Te.a.first_card,children:Object(me.jsx)(be.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(n.name,"(\u0432\u0435\u0440\u0445)"),price:n.price,thumbnail:n.image})}),Object(me.jsx)("div",{className:Te.a.elements_container,"data-testid":"ingridients-container",children:O}),n.name&&Object(me.jsx)("div",{className:Te.a.last_card,children:Object(me.jsx)(be.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(n.name,"(\u043d\u0438\u0437)"),price:n.price,thumbnail:n.image})}),Object(me.jsxs)("div",{className:"".concat(Te.a.general_price," mt-10"),children:[Object(me.jsxs)("div",{className:"".concat(Te.a.price," mr-10"),children:[Object(me.jsx)("p",{className:"mr-3",children:c}),Object(me.jsx)(be.CurrencyIcon,{type:"primary"})]}),Object(me.jsx)(be.Button,{type:"primary",size:"medium",onClick:function(){if(v("accessToken")){var t=v("accessToken"),r=a.map((function(e){return e.type})),c=-1!==r.indexOf("sauce"),i=-1!==r.indexOf("main");(c&&n||i&&n)&&(e.handleOpenOrderDetailsModal(),j(function(e,t){return function(a){a({type:ie}),Z(e,t).then((function(e){e&&e.success?a({type:oe,order:e}):a({type:ee})})).catch((function(e){a({type:de}),400===e.status&&console.log({error:e})}))}}(p,t))),j({type:ue})}else s.push("/login")},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},Ue=a(114),we=a(201),Fe=a(108),Me=a.n(Fe),Ae=function(e){return Object(me.jsx)(me.Fragment,{children:Object(me.jsx)("main",{className:Me.a.main,children:Object(me.jsxs)(we.a,{backend:Ue.a,children:[Object(me.jsx)(Ee,{handleOpenIngridientsModal:e.handleOpenIngridientsModal}),Object(me.jsx)(Pe,{handleOpenOrderDetailsModal:e.handleOpenOrderDetailsModal,isSauce:e.isSauce,isMain:e.isMain})]})})})},Ge=a(13),Be=a.n(Ge),qe=function(e){return Object(me.jsxs)("div",{className:Be.a.ingridients,children:[Object(me.jsx)("img",{src:e.ingridientInfo&&e.ingridientInfo.image_large,alt:e.ingridientInfo&&e.ingridientInfo.name,className:Be.a.image}),Object(me.jsxs)("div",{className:"".concat(Be.a.container," mt-4 mb-15"),children:[Object(me.jsx)("h2",{className:Be.a.title,children:e.ingridientInfo&&e.ingridientInfo.name}),Object(me.jsxs)("div",{className:"".concat(Be.a.nutrients," mt-8"),children:[Object(me.jsxs)("div",{className:"".concat(Be.a.nutrient," mr-5"),children:[Object(me.jsx)("h3",{className:Be.a.nutrient_title,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(me.jsx)("p",{className:Be.a.nutrient_text,children:e.ingridientInfo&&e.ingridientInfo.calories})]}),Object(me.jsxs)("div",{className:"".concat(Be.a.nutrient," mr-5"),children:[Object(me.jsx)("h3",{className:Be.a.nutrient_title,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(me.jsx)("p",{className:Be.a.nutrient_text,children:e.ingridientInfo&&e.ingridientInfo.proteins})]}),Object(me.jsxs)("div",{className:"".concat(Be.a.nutrient," mr-5"),children:[Object(me.jsx)("h3",{className:Be.a.nutrient_title,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(me.jsx)("p",{className:Be.a.nutrient_text,children:e.ingridientInfo&&e.ingridientInfo.fat})]}),Object(me.jsxs)("div",{className:"".concat(Be.a.nutrient," mr-5"),children:[Object(me.jsx)("h3",{className:Be.a.nutrient_title,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(me.jsx)("p",{className:Be.a.nutrient_text,children:e.ingridientInfo&&e.ingridientInfo.carbohydrates})]})]})]})]})},Le=a(39),He=a.n(Le),Je=a.p+"static/media/done.e036971b.png";var We=function(){var e=ve((function(e){return e.burgerIngridients})),t=e.order,a=e.orderRequest;return Object(me.jsxs)("div",{className:He.a.order,children:[a?Object(me.jsx)("h2",{className:He.a.loading,children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 :)"}):Object(me.jsx)("h2",{className:"".concat(He.a.number," mt-10 mb-8"),children:void 0!==t?t.success&&t.order.number:""}),Object(me.jsx)("p",{className:"".concat(He.a.id," mb-15"),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(me.jsx)("img",{src:Je,alt:"\u0413\u043e\u0442\u043e\u0432\u043e"}),Object(me.jsxs)("div",{className:"".concat(He.a.notification," mt-15 mb-30"),children:[Object(me.jsx)("p",{className:He.a.message,children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(me.jsx)("p",{className:He.a.message_wait,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})]})},Qe=a(109),ze=a(110),Ke=a(116),Ve=a(115),Xe=a(43),Ze=a.n(Xe),Ye=a(111),$e=a.n(Ye),et=function(e){return Object(me.jsx)("div",{className:$e.a.overlay,onClick:e.closeModal})},tt=document.getElementById("react-modals"),at=function(e){Object(Ke.a)(a,e);var t=Object(Ve.a)(a);function a(){var e;Object(Qe.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleCloseModal=function(){e.props.handleCloseModal&&e.props.handleCloseModal()},e}return Object(ze.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isOpen,a=e.handleCloseModal,n=e.children;return s.a.createPortal(Object(me.jsxs)("section",{className:t?Ze.a.modal:Ze.a.modal_hidden,children:[Object(me.jsxs)("div",{className:Ze.a.modal_wrapper,children:[Object(me.jsxs)("div",{className:"".concat(Ze.a.header," mt-10"),children:[Object(me.jsx)("h2",{className:"".concat(Ze.a.title," ml-10")}),Object(me.jsx)("button",{className:"".concat(Ze.a.closeButton," mr-10"),type:"button",onClick:a,children:Object(me.jsx)(be.CloseIcon,{type:"primary"})})]}),n]}),Object(me.jsx)(et,{closeModal:a})]}),tt)}}]),a}(r.a.Component),nt=a(26),rt=a.n(nt),ct=a(41);function st(){var e=r.a.useState({}),t=Object(d.a)(e,2),a=t[0],c=t[1],s=r.a.useState({}),i=Object(d.a)(s,2),o=i[0],l=i[1],u=r.a.useState(!1),_=Object(d.a)(u,2),j=_[0],b=_[1],m=r.a.useState(!1),O=Object(d.a)(m,2),p=O[0],f=O[1],g=r.a.useState(!1),x=Object(d.a)(g,2),v=x[0],y=x[1],N=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,S=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];c(e),l(t),b(a),f(n),y(r)}),[c,l,b,f,y]);return{values:a,handleChange:function(e){var t=e.target,n=t.name,r=t.value;c(Object(h.a)(Object(h.a)({},a),{},Object(ct.a)({},n,r))),l(Object(h.a)(Object(h.a)({},o),{},Object(ct.a)({},n,t.validationMessage))),b(t.checkValidity()),f(!r),"mail"===n&&N.test(String(r).toLowerCase())?y(!0):y(!1)},errors:o,isValid:j,resetForm:S,isDirty:p,isEmail:v}}var it=function(){var e=ye(),t=ve((function(e){return e.authUser.user})).name,a=st(),n=st(),r=function(t){t.preventDefault();var r=a.values.email,c=n.values.password;e(function(e,t){return function(a){a({type:R}),m(e,t).then((function(e){e&&e.success?(localStorage.setItem("refreshToken",e.refreshToken),y("accessToken",e.accessToken.split("Bearer ")[1],{}),a({type:k,user:e.user})):a({type:D})})).catch((function(e){a({type:D}),console.log(e)}))}}(r,c))},c=Object(l.h)();if(t){var s=(c.state||{from:{pathname:"/"}}).from;return Object(me.jsx)(l.a,{to:s})}return Object(me.jsx)("section",{className:rt.a.sign_in,children:Object(me.jsxs)("div",{className:rt.a.container,children:[Object(me.jsx)("h2",{className:"".concat(rt.a.title," mb-6"),children:"\u0412\u0445\u043e\u0434"}),Object(me.jsxs)("form",{className:rt.a.form,onSubmit:function(e){r(e)},children:[Object(me.jsx)("fieldset",{className:"".concat(rt.a.fieldset," mb-6"),children:Object(me.jsx)(be.Input,{type:"email",placeholder:"E-mail",name:"email",value:a.values.email||"",onChange:a.handleChange})}),Object(me.jsx)("fieldset",{className:"".concat(rt.a.fieldset," mb-6"),children:Object(me.jsx)(be.PasswordInput,{name:"password",value:n.values.password||"",onChange:n.handleChange})}),Object(me.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(me.jsxs)("div",{className:"".concat(rt.a.signup_box," mt-20 mb-4"),children:[Object(me.jsx)("p",{className:rt.a.signup_text,children:"\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(me.jsx)(i.b,{className:"".concat(rt.a.link," ml-2"),to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(me.jsxs)("div",{className:rt.a.recover_box,children:[Object(me.jsx)("p",{className:rt.a.recover_box,children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(me.jsx)(i.b,{className:"".concat(rt.a.link," ml-2"),to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})},ot=a(31),dt=a.n(ot);var lt=function(){var e=ye(),t=Object(l.h)(),a=ve((function(e){return e.authUser.user})).name,n=st(),r=st(),c=st(),s=function(t){t.preventDefault();var a=n.values.name,s=r.values.email,i=c.values.password;e(function(e,t,a){return function(n){n({type:N}),j(e,t,a).then((function(e){e&&e.success?(y("accessToken",e.accessToken.split("Bearer ")[1],{}),n({type:S,user:e.user,refreshToken:e.refreshToken})):n({type:E})})).catch((function(e){n({type:E}),console.log(e)}))}}(a,s,i))};if(a){var o=(t.state||{from:{pathname:"/"}}).from;return Object(me.jsx)(l.a,{to:o})}return Object(me.jsx)("section",{className:dt.a.sign_up,children:Object(me.jsxs)("div",{className:dt.a.container,children:[Object(me.jsx)("h2",{className:"".concat(dt.a.title," mb-6"),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(me.jsxs)("form",{className:dt.a.form,onSubmit:function(e){s(e)},children:[Object(me.jsx)("fieldset",{className:"".concat(dt.a.fieldset," mb-6"),children:Object(me.jsx)(be.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",onChange:n.handleChange,value:n.values.name||""})}),Object(me.jsx)("fieldset",{className:"".concat(dt.a.fieldset," mb-6"),children:Object(me.jsx)(be.Input,{type:"email",placeholder:"E-mail",name:"email",onChange:r.handleChange,value:r.values.email||""})}),Object(me.jsx)("fieldset",{className:"".concat(dt.a.fieldset," mb-6"),children:Object(me.jsx)(be.PasswordInput,{name:"password",onChange:c.handleChange,value:c.values.password||""})}),Object(me.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(me.jsxs)("div",{className:"".concat(dt.a.signup_box," mt-20 mb-4"),children:[Object(me.jsx)("p",{className:dt.a.signup_text,children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(me.jsx)(i.b,{className:"".concat(dt.a.link," ml-2"),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},ut=a(34),_t=a.n(ut);var jt=function(){var e=Object(l.h)(),t=ye(),a=ve((function(e){return e.authUser.user})).name,n=ve((function(e){return e.authUser.forgotPasswordSucces})),r=st(),c=function(e){e.preventDefault(),t(function(e){return function(t){t({type:G}),f(e).then((function(e){e&&e.success?t({type:B}):t({type:q})})).catch((function(e){t({type:q}),console.log(e)}))}}(r.values.email))};if(a){var s=(e.state||{from:{pathname:"/"}}).from;return Object(me.jsx)(l.a,{to:s})}return n?Object(me.jsx)(l.a,{to:"/reset-password"}):Object(me.jsx)("section",{className:_t.a.recover,children:Object(me.jsxs)("div",{className:_t.a.container,children:[Object(me.jsx)("h2",{className:"".concat(_t.a.title," mb-6"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(me.jsxs)("form",{className:_t.a.form,onSubmit:function(e){c(e)},children:[Object(me.jsx)("fieldset",{className:"".concat(_t.a.fieldset," mb-6"),children:Object(me.jsx)(be.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",name:"email",value:r.values.email||"",onChange:r.handleChange})}),Object(me.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(me.jsxs)("div",{className:"".concat(_t.a.recover_box," mt-20"),children:[Object(me.jsx)("p",{className:_t.a.recover_box,children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(me.jsx)(i.b,{className:"".concat(_t.a.link," ml-2"),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},bt=a(32),mt=a.n(bt);var Ot=function(){var e=Object(l.h)(),t=ye(),a=ve((function(e){return e.authUser.user})).name,n=ve((function(e){return e.authUser.resetPasswordSucces})),r=ve((function(e){return e.authUser.forgotPasswordSucces})),c=st(),s=st(),o=function(e){e.preventDefault();var a=c.values.password,n=s.values.code;t(function(e,t){return function(a){a({type:L}),x(e,t).then((function(e){e&&e.success?a({type:H}):a({type:J})})).catch((function(e){a({type:J}),console.log(e)}))}}(a,n))};if(n)return Object(me.jsx)(l.a,{to:"/"});if(!r){var d=(e.state||{from:{pathname:"/"}}).from;return console.log(d),Object(me.jsx)(l.a,{to:d})}if(a){var u=(e.state||{from:{pathname:"/"}}).from;return Object(me.jsx)(l.a,{to:u})}return Object(me.jsx)("section",{className:mt.a.reset,children:Object(me.jsxs)("div",{className:mt.a.container,children:[Object(me.jsx)("h2",{className:"".concat(mt.a.title," mb-6"),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(me.jsxs)("form",{className:mt.a.form,onSubmit:function(e){o(e)},children:[Object(me.jsx)("fieldset",{className:"".concat(mt.a.fieldset," mb-6"),children:Object(me.jsx)(be.PasswordInput,{name:"password",value:c.values.password||"",onChange:c.handleChange})}),Object(me.jsx)("fieldset",{className:"".concat(mt.a.fieldset," mb-6"),children:Object(me.jsx)(be.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"code",value:s.values.code||"",onChange:s.handleChange})}),Object(me.jsx)(be.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(me.jsxs)("div",{className:"".concat(mt.a.recover_box," mt-20"),children:[Object(me.jsx)("p",{className:mt.a.recover_box,children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(me.jsx)(i.b,{className:"".concat(mt.a.link," ml-2"),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},pt=a(35),ft=a.n(pt),gt=a(33),xt=a.n(gt);var ht=function(){var e=Object(l.g)(),t=Object(o.b)(),a="/profile"===e.location.pathname,n="/profile/orders"===e.location.pathname;return Object(me.jsxs)("div",{className:xt.a.route_box,children:[Object(me.jsx)(i.b,{to:"/profile",className:"".concat(xt.a.link," mb-9 ").concat(a?xt.a.link_active:xt.a.link),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(me.jsx)(i.b,{to:"/profile/orders",className:"".concat(xt.a.link," mb-9 ").concat(n?xt.a.link_active:xt.a.link),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(me.jsx)(i.b,{className:"".concat(xt.a.link," mb-20"),to:"/login",onClick:function(a){a.preventDefault();var n=localStorage.getItem("refreshToken");n&&t(V(n)),e.push("/login")},children:"\u0412\u044b\u0445\u043e\u0434"}),Object(me.jsx)("p",{className:xt.a.text,children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]})};var vt=function(){var e=r.a.useState(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],c=ve((function(e){return e.authUser.user})),s=c.name,i=c.email,o=r.a.useState({name:"",email:""}),l=Object(d.a)(o,2),u=l[0],_=l[1];r.a.useEffect((function(){s&&i&&_({name:s,email:i})}),[i,s]);var j=ye(),b=function(e){_(Object(h.a)(Object(h.a)({},u),{},Object(ct.a)({},e.target.name,e.target.value)))};r.a.useEffect((function(){u.email===i&&u.name===s?n(!1):n(!0)}),[i,s,u.email,u.name]);var m=function(e){e.preventDefault();var t=v("accessToken");t&&j(function(e,t,a){return function(n){n({type:W}),g(e,t,a).then((function(e){e&&e.success?n({type:Q,user:e.user}):n({type:z})})).catch((function(e){n({type:z}),console.log(e)}))}}(t,u.email,u.name))};return Object(me.jsx)(me.Fragment,{children:Object(me.jsx)("section",{className:ft.a.profile,children:Object(me.jsxs)("div",{className:ft.a.container,children:[Object(me.jsx)(ht,{}),Object(me.jsxs)("form",{className:ft.a.form,onSubmit:function(e){m(e)},onReset:function(e){!function(e){e.preventDefault(),_({name:s,email:i})}(e)},children:[Object(me.jsx)("fieldset",{className:"".concat(ft.a.fieldset," mb-6"),children:Object(me.jsx)(be.Input,{type:"text",name:"name",value:u.name,placeholder:"\u0418\u043c\u044f",icon:"EditIcon",onChange:function(e){b(e)}})}),Object(me.jsx)("fieldset",{className:"".concat(ft.a.fieldset," mb-6"),children:Object(me.jsx)(be.Input,{name:"email",placeholder:"Email",icon:"EditIcon",value:u.email||"",onChange:function(e){b(e)}})}),Object(me.jsx)("fieldset",{className:ft.a.fieldset,children:Object(me.jsx)(be.Input,{type:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"EditIcon",value:"",onChange:function(e){b(e)}})}),Object(me.jsxs)("div",{className:a?ft.a.buttons:ft.a.buttons_hide,children:[Object(me.jsx)(be.Button,{type:"secondary",size:"small",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(me.jsx)(be.Button,{type:"primary",size:"small",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})})})},yt=a(87),Nt=a.n(yt),St=a(22),Et=a.n(St),It=function(e){var t=(new Date).getDate(),a=Object(l.h)();return Object(me.jsx)(i.b,{className:Et.a.link,onClick:function(){e.handleOpenOrderModal()},to:{pathname:"/profile/orders/".concat(e.order._id),state:{background:a}},children:Object(me.jsxs)("div",{className:Et.a.card,onClick:e.handleOpenOrderModal,children:[Object(me.jsxs)("div",{className:Et.a.box,children:[Object(me.jsxs)("p",{className:"".concat(Et.a.code," text text_type_digits-default"),children:["#",e.order.number]}),Object(me.jsxs)("p",{className:"".concat(Et.a.time," text text_type_main-default text_color_inactive"),children:[t===e.day?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ":t-e.day===1?"".concat(t-e.day," \u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434, "):"".concat(t-e.day," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434, "),e.time," i-GMT+3"]})]}),Object(me.jsx)("p",{className:"".concat(Et.a.name," text text_type_main-medium"),children:e.order.name}),Object(me.jsx)("p",{className:"".concat(Et.a.status," text text_type_main-small"),children:"done"===e.order.status?"\u0421\u043e\u0437\u0434\u0430\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}),Object(me.jsxs)("div",{className:Et.a.burger_info,children:[Object(me.jsx)("ul",{className:Et.a.images_list,children:e.imagesArr.map((function(e,t){var a;return t&&(a=-10*t),Object(me.jsx)("li",{className:Et.a.image_li,style:{left:a},children:Object(me.jsx)("img",{src:e,alt:"test",className:Et.a.image})},t)}))}),Object(me.jsxs)("div",{className:Et.a.price_box,children:[Object(me.jsx)("p",{className:Et.a.price,children:e.totalPrice}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]})]})})},Ct="WS_CONNECTION_START",Tt="WS_CONNECTION_SUCCESS",Rt="WS_CONNECTION_ERROR",kt="WS_CONNECTION_CLOSED",Dt="WS_GET_MESSAGE",Pt="WS_AUTH_CONNECTION_START",Ut="WS_AUTH_CONNECTION_SUCCESS",wt="WS_AUTH_CONNECTION_ERROR",Ft="WS_AUTH_CONNECTION_CLOSED",Mt="WS_AUTH_GET_MESSAGE",At=function(){return function(e){e({type:Ct})}},Gt=function(){return function(e){e({type:Pt})}},Bt=function(e){var t=ye();r.a.useEffect((function(){return t(Gt()),function(){t({type:kt})}}),[t]);var a=ve((function(e){return e.userOrders.ordersData})),n=ve((function(e){return e.burgerIngridients.burgerIngridientsArr})),c=a&&a.orders;return Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)("section",{className:Nt.a.orders,children:[Object(me.jsx)(ht,{}),Object(me.jsx)("div",{className:Nt.a.container,children:c&&c.map((function(t){var a=function(e){var t=[];return e.map((function(e){return n.forEach((function(a){a._id===e&&t.push(a.image)}))})),t}(t.ingredients),r=function(e){var t=[];return e.map((function(e){return n.forEach((function(a){a._id===e&&t.push(a)}))})),t.reduce((function(e,t){return t.price+e}),0)}(t.ingredients),c=t.createdAt,s=c.match(/\d\d:\d\d/gm)[0],i=+c.match(/\d\dT/gm)[0].match(/\d\d/gm)[0];return Object(me.jsx)(It,{handleOpenOrderModal:function(){e.handleOpenOrderModal(t)},imagesArr:a,totalPrice:r,time:s,day:i,order:t},t._id)}))})]})})},qt=a(10),Lt=a.n(qt),Ht=a(19),Jt=a.n(Ht),Wt=function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],s=Object(l.h)(),o=(new Date).getDate();return r.a.useEffect((function(){e.images&&(e.images.length>5?c(e.images.slice(0,6)):c(e.images))}),[e.images]),Object(me.jsx)(i.b,{className:Jt.a.link,onClick:e.handleOpenFeedModal,to:{pathname:"/feed/".concat(e.order._id),state:{background:s}},children:Object(me.jsxs)("div",{className:Jt.a.card,children:[Object(me.jsxs)("div",{className:Jt.a.box,children:[Object(me.jsxs)("p",{className:"".concat(Jt.a.code," text text_type_digits-default"),children:["#",e.order.number]}),Object(me.jsxs)("p",{className:"".concat(Jt.a.time," text text_type_main-default text_color_inactive"),children:[o===e.day?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ":o-e.day===1?"".concat(o-e.day," \u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434, "):"".concat(o-e.day," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434, "),e.time," i-GMT+3"]})]}),Object(me.jsx)("p",{className:"".concat(Jt.a.name," text text_type_main-medium"),children:e.order.name}),Object(me.jsxs)("div",{className:Jt.a.burger_info,children:[Object(me.jsx)("ul",{className:Jt.a.images_list,children:n&&n.map((function(t,a){var r;a&&(r=-10*a);var c=5===a&&e.images.length>6;return Object(me.jsxs)("li",{className:Jt.a.image_li,style:{left:r},children:[Object(me.jsx)("img",{src:t,alt:"test",className:"\n                    ".concat(Jt.a.image,"\n                      ").concat(c?Jt.a.lastImage:Jt.a.image)}),Object(me.jsxs)("p",{className:"text text_type_digits-default ".concat(c?Jt.a.image_number:Jt.a.image_number_none),children:["+",e.images&&n&&e.images.length-n.length]})]},a)}))}),Object(me.jsxs)("div",{className:Jt.a.price_box,children:[Object(me.jsx)("p",{className:"".concat(Jt.a.price," text text_type_digits-default"),children:e.price}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]})]})})},Qt=function(e){var t=ye();r.a.useEffect((function(){return t(At()),function(){t({type:kt})}}),[t]);var a=ve((function(e){return e.feed})).feedData,n=ve((function(e){return e.burgerIngridients.burgerIngridientsArr})),c=a&&a.orders,s=c&&c.filter((function(e){return"done"===e.status})).slice(0,20),i=c&&c.filter((function(e){return"pending"===e.status})).slice(0,20);return Object(me.jsx)(me.Fragment,{children:Object(me.jsx)("section",{className:Lt.a.feed,children:Object(me.jsxs)("div",{className:Lt.a.container,children:[Object(me.jsx)("h2",{className:Lt.a.title,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(me.jsxs)("div",{className:Lt.a.box,children:[Object(me.jsx)("div",{className:"".concat(Lt.a.orders," mr-15"),children:c&&c.map((function(t){var a=t&&t.createdAt,r=a&&a.match(/\d\d:\d\d/gm)[0],c=a&&a.match(/\d\dT/gm)[0].match(/\d\d/gm)[0],s=Number.parseInt(c),i=function(e){var t=[];return e.map((function(e){return n.forEach((function(a){a._id===e&&t.push(a.image)}))})),t}(t.ingredients),o=function(e){var t=[];return e.map((function(e){return n.forEach((function(a){a._id===e&&t.push(a)}))})),t.reduce((function(e,t){return t.price+e}),0)}(t.ingredients);return Object(me.jsx)(Wt,{order:t,day:s,time:r,images:i,price:o,handleOpenFeedModal:function(){var a;a=t,e.handleOpenFeedModal(a)}},t._id)}))}),Object(me.jsxs)("div",{className:Lt.a.statistic,children:[Object(me.jsxs)("div",{className:"".concat(Lt.a.processes," mb-15"),children:[Object(me.jsxs)("div",{className:"".concat(Lt.a.done," mr-9"),children:[Object(me.jsx)("p",{className:"".concat(Lt.a.title," mb-6 text text_type_main-default"),children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(me.jsx)("ul",{className:Lt.a.done_list,children:s&&s.map((function(e){return Object(me.jsx)("li",{className:"".concat(Lt.a.done_li," mb-2 text text_type_digits-default"),children:e.number},e._id)}))})]}),Object(me.jsxs)("div",{className:Lt.a.in_work,children:[Object(me.jsx)("p",{className:"".concat(Lt.a.title," mb-6 text text_type_main-default"),children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(me.jsx)("ul",{className:Lt.a.in_work_list,children:i&&i.map((function(e){return Object(me.jsx)("li",{className:"".concat(Lt.a.in_work_li," mb-2 text text_type_digits-default"),children:e.number},e._id)}))})]})]}),Object(me.jsxs)("div",{className:"".concat(Lt.a.done_all_time," mb-16"),children:[Object(me.jsx)("p",{className:"".concat(Lt.a.title," text text_type_main-default"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(me.jsx)("p",{className:"".concat(Lt.a.number," text text_type_digits-large"),children:a&&a.total})]}),Object(me.jsxs)("div",{className:Lt.a.done_today,children:[Object(me.jsx)("p",{className:"".concat(Lt.a.title," text text_type_main-default"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(me.jsx)("p",{className:"".concat(Lt.a.number," text text_type_digits-large"),children:a&&a.totalToday})]})]})]})]})})})},zt=a(88),Kt=a.n(zt),Vt=a(112),Xt=a(37),Zt=function(e){var t=e.children,a=Object(Xt.a)(e,["children"]),r=Object(o.b)(),c=function(){var e=Object(Vt.a)(Kt.a.mark((function e(){return Kt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v("accessToken")&&r(K());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){c()}),[]),v("accessToken")?Object(me.jsx)(l.b,Object(h.a)(Object(h.a)({},a),{},{children:t})):Object(me.jsx)(l.b,Object(h.a)(Object(h.a)({},a),{},{render:function(e){var t=e.location;return Object(me.jsx)(l.a,{to:{pathname:"/login",state:{from:t}}})}}))},Yt=function(e){var t=e.children,a=Object(Xt.a)(e,["children"]),n=ve((function(e){return e.authUser.user})),r=""!==n.email&&""!==n.name;return Object(me.jsx)(l.b,Object(h.a)(Object(h.a)({},a),{},{render:function(){return r?Object(me.jsx)(l.a,{to:"/"}):t}}))},$t=a(12),ea=a.n($t);var ta=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=Object(l.i)().id,s=ve((function(e){return e.burgerIngridients})).burgerIngridientsArr;return r.a.useEffect((function(){var e;s.forEach((function(t){t._id===c&&(e=t)})),n(e)}),[s,c]),Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)("div",{className:ea.a.ingridients,children:[Object(me.jsx)("h2",{className:"".concat(ea.a.title," text text_type_main-large"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(me.jsx)("img",{src:a&&a.image_large,alt:a&&a.name,className:ea.a.image}),Object(me.jsxs)("div",{className:"".concat(ea.a.container," mt-4 mb-15"),children:[Object(me.jsx)("h2",{className:ea.a.title,children:a&&a.name}),Object(me.jsxs)("div",{className:"".concat(ea.a.nutrients," mt-8"),children:[Object(me.jsxs)("div",{className:"".concat(ea.a.nutrient," mr-5"),children:[Object(me.jsx)("h3",{className:ea.a.nutrient_title,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(me.jsx)("p",{className:ea.a.nutrient_text,children:a&&a.calories})]}),Object(me.jsxs)("div",{className:"".concat(ea.a.nutrient," mr-5"),children:[Object(me.jsx)("h3",{className:ea.a.nutrient_title,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(me.jsx)("p",{className:ea.a.nutrient_text,children:a&&a.proteins})]}),Object(me.jsxs)("div",{className:"".concat(ea.a.nutrient," mr-5"),children:[Object(me.jsx)("h3",{className:ea.a.nutrient_title,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(me.jsx)("p",{className:ea.a.nutrient_text,children:a&&a.fat})]}),Object(me.jsxs)("div",{className:"".concat(ea.a.nutrient," mr-5"),children:[Object(me.jsx)("h3",{className:ea.a.nutrient_title,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(me.jsx)("p",{className:ea.a.nutrient_text,children:a&&a.carbohydrates})]})]})]})]})})},aa=a(55),na=a.n(aa);var ra=function(){var e=Object(l.g)();return Object(me.jsxs)("section",{className:na.a.not_found,children:[Object(me.jsx)("p",{className:"".concat(na.a.error," text text_type_digits-large mb-25"),children:"404"}),Object(me.jsx)("h2",{className:"".concat(na.a.title," text text_type_main-medium mb-10"),children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430 :("}),Object(me.jsx)("button",{onClick:function(){e.goBack()},className:"text text_type_main-medium ".concat(na.a.go_back),children:"\u041d\u0430\u0437\u0430\u0434"})]})},ca=a(14),sa=a.n(ca),ia=function(e){var t=(new Date).getDate(),a=e&&e.createdAt,n=a&&a.match(/\d\d:\d\d/gm)[0],r=a&&a.match(/\d\dT/gm)[0].match(/\d\d/gm)[0];return{todayDay:t,time:n,day:Number.parseInt(r)}},oa=function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],s=r.a.useState(),i=Object(d.a)(s,2),o=(i[0],i[1],r.a.useState()),l=Object(d.a)(o,2),u=l[0],_=l[1],j=ve((function(e){return e.burgerIngridients.burgerIngridientsArr})),b=e.feedOrderData&&ia(e.feedOrderData);r.a.useEffect((function(){var t=[];e.feedOrderData&&e.feedOrderData.ingredients.map((function(e){return j.forEach((function(a){a._id===e&&t.push(a)}))}));var a=t.reduce((function(e,t){return t.price+e}),0);c(a)}),[j,e.feedOrderData]),r.a.useEffect((function(){var t=e.feedOrderData&&e.feedOrderData.ingredients.filter((function(t,a){var n;return(null===(n=e.feedOrderData)||void 0===n?void 0:n.ingredients.indexOf(t))===a}));_(t)}),[e.feedOrderData]);var m=r.a.useMemo((function(){var t={};return e.feedOrderData&&e.feedOrderData.ingredients.forEach((function(e){t[e]||(t[e]=0),t[e]++})),t}),[e.feedOrderData]);return Object(me.jsxs)("div",{className:sa.a.container,children:[Object(me.jsxs)("div",{className:sa.a.info,children:[Object(me.jsxs)("p",{className:"text text_type_digits-default ".concat(sa.a.number),children:["#",e.feedOrderData&&e.feedOrderData.number]}),Object(me.jsx)("p",{className:"text text_type_main-medium ".concat(sa.a.name),children:e.feedOrderData&&e.feedOrderData.name}),Object(me.jsx)("p",{className:"text text_type_main-small ".concat(sa.a.status),children:e.feedOrderData&&e.feedOrderData.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435"})]}),Object(me.jsxs)("div",{className:sa.a.structure,children:[Object(me.jsx)("h2",{className:sa.a.title,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(me.jsx)("ul",{className:sa.a.list,children:u&&u.map((function(e){var t={};return j.forEach((function(a){a._id===e&&(t=a)})),Object(me.jsxs)("li",{className:sa.a.li,children:[Object(me.jsx)("img",{className:sa.a.image,src:t&&t.image,alt:t&&t.name}),Object(me.jsx)("p",{className:"text ".concat(sa.a.ing_name),children:t&&t.name}),Object(me.jsxs)("div",{className:sa.a.price_box,children:[Object(me.jsxs)("p",{className:sa.a.price,children:[m[e]>1?m[e]+" x ":"",t&&t.price]}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]},e)}))}),Object(me.jsxs)("div",{className:sa.a.box,children:[Object(me.jsxs)("p",{className:"text text_type_main-default text_color_inactive ".concat(sa.a.time),children:[b.todayDay===Number(b.day)?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ":b.todayDay-Number(b.day)===1?"".concat(b.todayDay-Number(b.day)," \u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434, "):"".concat(b.todayDay-Number(b.day)," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434, "),b.time," i-GMT+3"]}),Object(me.jsxs)("div",{className:sa.a.price_box,children:[Object(me.jsx)("p",{className:sa.a.price,children:n}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]})]})]})},da=a(15),la=a.n(da),ua=function(e){var t=r.a.useState(),a=Object(d.a)(t,2),n=a[0],c=a[1],s=r.a.useState(),i=Object(d.a)(s,2),o=(i[0],i[1],r.a.useState()),l=Object(d.a)(o,2),u=l[0],_=l[1],j=ve((function(e){return e.burgerIngridients.burgerIngridientsArr})),b=e.userOrderData&&ia(e.userOrderData);r.a.useEffect((function(){var t=[];e.userOrderData&&e.userOrderData.ingredients.map((function(e){return j.forEach((function(a){a._id===e&&t.push(a)}))}));var a=t.reduce((function(e,t){return t.price+e}),0);c(a)}),[j,e.userOrderData]),r.a.useEffect((function(){var t=e.userOrderData&&e.userOrderData.ingredients.filter((function(t,a){return e.userOrderData.ingredients.indexOf(t)===a}));_(t)}),[e.userOrderData]);var m=r.a.useMemo((function(){var t={};return e.userOrderData&&e.userOrderData.ingredients.forEach((function(e){t[e]||(t[e]=0),t[e]++})),t}),[e.userOrderData]);return Object(me.jsxs)("div",{className:la.a.container,children:[Object(me.jsxs)("div",{className:la.a.info,children:[Object(me.jsxs)("p",{className:"text text_type_digits-default ".concat(la.a.number),children:["#",e.userOrderData&&e.userOrderData.number]}),Object(me.jsx)("p",{className:"text text_type_main-medium ".concat(la.a.name),children:e.userOrderData&&e.userOrderData.name}),Object(me.jsx)("p",{className:"text text_type_main-small ".concat(la.a.status),children:e.userOrderData&&e.userOrderData.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435"})]}),Object(me.jsxs)("div",{className:la.a.structure,children:[Object(me.jsx)("h2",{className:la.a.title,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(me.jsx)("ul",{className:la.a.list,children:u&&u.map((function(e){var t={};return j.forEach((function(a){a._id===e&&(t=a)})),Object(me.jsxs)("li",{className:la.a.li,children:[Object(me.jsx)("img",{className:la.a.image,src:t&&t.image,alt:t&&t.name}),Object(me.jsx)("p",{className:"text ".concat(la.a.ing_name),children:t&&t.name}),Object(me.jsxs)("div",{className:la.a.price_box,children:[Object(me.jsxs)("p",{className:la.a.price,children:[m[e]>1?m[e]+" x ":"",t&&t.price]}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]},e)}))}),Object(me.jsxs)("div",{className:la.a.box,children:[Object(me.jsxs)("p",{className:"text text_type_main-default text_color_inactive ".concat(la.a.time),children:[b.todayDay===b.day?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ":b.todayDay-b.day===1?"".concat(b.todayDay-b.day," \u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434, "):"".concat(b.todayDay-b.day," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434, "),b.time," i-GMT+3"]}),Object(me.jsxs)("div",{className:la.a.price_box,children:[Object(me.jsx)("p",{className:la.a.price,children:n}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]})]})]})},_a=a(16),ja=a.n(_a),ba=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),s=Object(d.a)(c,2),i=s[0],o=s[1],u=r.a.useState(),_=Object(d.a)(u,2),j=_[0],b=_[1],m=ye(),O=Object(l.i)().id;r.a.useEffect((function(){m(At())}),[m]);var p=ve((function(e){return e.burgerIngridients})).burgerIngridientsArr,f=ve((function(e){return e.feed})).feedData,g=f&&f.orders;r.a.useEffect((function(){var e;g&&g.forEach((function(t){t._id===O&&(e=t)})),n(e)}),[O,g]);var x=a&&ia(a);r.a.useEffect((function(){var e=[];a&&a.ingredients.map((function(t){return p.forEach((function(a){a._id===t&&e.push(a)}))}));var t=e.reduce((function(e,t){return t.price+e}),0);o(t)}),[p,a]),r.a.useEffect((function(){var e=a&&a.ingredients.filter((function(e,t){return a.ingredients.indexOf(e)===t}));b(e)}),[a]);var h=r.a.useMemo((function(){var e={};return a&&a.ingredients.forEach((function(t){e[t]||(e[t]=0),e[t]++})),e}),[a]);return Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)("div",{className:ja.a.container,children:[Object(me.jsxs)("div",{className:ja.a.info,children:[Object(me.jsxs)("p",{className:"text text_type_digits-default ".concat(ja.a.number),children:["#",a&&a.number]}),Object(me.jsx)("p",{className:"text text_type_main-medium ".concat(ja.a.name),children:a&&a.name}),Object(me.jsx)("p",{className:"text text_type_main-small ".concat(ja.a.status),children:a&&a.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435"})]}),Object(me.jsxs)("div",{className:ja.a.structure,children:[Object(me.jsx)("h2",{className:ja.a.title,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(me.jsx)("ul",{className:ja.a.list,children:j&&j.map((function(e){var t={};return p.forEach((function(a){a._id===e&&(t=a)})),Object(me.jsxs)("li",{className:ja.a.li,children:[Object(me.jsx)("img",{className:ja.a.image,src:t&&t.image,alt:t&&t.name}),Object(me.jsx)("p",{className:"text ".concat(ja.a.ing_name),children:t&&t.name}),Object(me.jsxs)("div",{className:ja.a.price_box,children:[Object(me.jsxs)("p",{className:ja.a.price,children:[h[e]>1?h[e]+" x ":"",t.price]}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]},e)}))}),Object(me.jsxs)("div",{className:ja.a.box,children:[Object(me.jsxs)("p",{className:"text text_type_main-default text_color_inactive ".concat(ja.a.time),children:[(null===x||void 0===x?void 0:x.todayDay)===(null===x||void 0===x?void 0:x.day)?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ":x.todayDay-x.day===1?"".concat(x.todayDay-x.day," \u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434, "):"".concat(x.todayDay-x.day," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434, "),null===x||void 0===x?void 0:x.time," i-GMT+3"]}),Object(me.jsxs)("div",{className:ja.a.price_box,children:[Object(me.jsx)("p",{className:ja.a.price,children:i}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]})]})]})})},ma=a(17),Oa=a.n(ma);var pa,fa=function(){var e=r.a.useState(),t=Object(d.a)(e,2),a=t[0],n=t[1],c=r.a.useState(),s=Object(d.a)(c,2),i=s[0],o=s[1],u=r.a.useState(),_=Object(d.a)(u,2),j=_[0],b=_[1],m=ye(),O=Object(l.i)().id;r.a.useEffect((function(){m(Gt())}),[m]);var p=ve((function(e){return e.burgerIngridients})).burgerIngridientsArr,f=ve((function(e){return e.userOrders.ordersData})),g=f&&f.orders;r.a.useEffect((function(){var e;g&&g.forEach((function(t){t._id===O&&(e=t)})),n(e)}),[O,g]);var x=a&&ia(a);r.a.useEffect((function(){var e=[];a&&a.ingredients.map((function(t){return p.forEach((function(a){a._id===t&&e.push(a)}))}));var t=e.reduce((function(e,t){return t.price+e}),0);o(t)}),[p,a]),r.a.useEffect((function(){var e=a&&a.ingredients.filter((function(e,t){return a.ingredients.indexOf(e)===t}));b(e)}),[a]);var h=r.a.useMemo((function(){var e={};return a&&a.ingredients.forEach((function(t){e[t]||(e[t]=0),e[t]++})),e}),[a]);return Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)("div",{className:Oa.a.container,children:[Object(me.jsxs)("div",{className:Oa.a.info,children:[Object(me.jsxs)("p",{className:"text text_type_digits-default ".concat(Oa.a.number),children:["#",a&&a.number]}),Object(me.jsx)("p",{className:"text text_type_main-medium ".concat(Oa.a.name),children:a&&a.name}),Object(me.jsx)("p",{className:"text text_type_main-small ".concat(Oa.a.status),children:a&&a.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435"})]}),Object(me.jsxs)("div",{className:Oa.a.structure,children:[Object(me.jsx)("h2",{className:Oa.a.title,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(me.jsx)("ul",{className:Oa.a.list,children:j&&j.map((function(e){var t={};return p.forEach((function(a){a._id===e&&(t=a)})),Object(me.jsxs)("li",{className:Oa.a.li,children:[Object(me.jsx)("img",{className:Oa.a.image,src:t&&t.image,alt:t&&t.name}),Object(me.jsx)("p",{className:"text ".concat(Oa.a.ing_name),children:t&&t.name}),Object(me.jsxs)("div",{className:Oa.a.price_box,children:[Object(me.jsxs)("p",{className:Oa.a.price,children:[h[e]>1?h[e]+" x ":"",t.price]}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]},e)}))}),Object(me.jsxs)("div",{className:Oa.a.box,children:[Object(me.jsxs)("p",{className:"text text_type_main-default text_color_inactive ".concat(Oa.a.time),children:[(null===x||void 0===x?void 0:x.todayDay)===(null===x||void 0===x?void 0:x.day)?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ":x.todayDay-x.day===1?"".concat(x.todayDay-x.day," \u0434\u0435\u043d\u044c \u043d\u0430\u0437\u0430\u0434, "):"".concat(x.todayDay-x.day," \u0434\u043d\u044f \u043d\u0430\u0437\u0430\u0434, "),null===x||void 0===x?void 0:x.time," i-GMT+3"]}),Object(me.jsxs)("div",{className:Oa.a.price_box,children:[Object(me.jsx)("p",{className:Oa.a.price,children:i}),Object(me.jsx)(be.CurrencyIcon,{type:"secondary"})]})]})]})]})})},ga=function(){var e=Object(o.b)(),t=Object(l.g)(),a=Object(l.h)(),n=r.a.useState(!1),c=Object(d.a)(n,2),s=c[0],i=(c[1],r.a.useState(!1)),u=Object(d.a)(i,2),_=u[0],j=(u[1],r.a.useState(!1)),b=Object(d.a)(j,2),m=b[0],O=b[1],p=r.a.useState(),f=Object(d.a)(p,2),g=f[0],x=f[1],h=r.a.useState(!1),y=Object(d.a)(h,2),N=y[0],S=y[1],E=r.a.useState(),I=Object(d.a)(E,2),C=I[0],T=I[1],R=r.a.useState(!1),k=Object(d.a)(R,2),D=k[0],P=k[1],U=r.a.useState(!1),w=Object(d.a)(U,2),F=w[0],M=w[1],A=r.a.useState(),G=Object(d.a)(A,2),B=G[0],q=G[1];r.a.useEffect((function(){e((function(e){e({type:Y}),X().then((function(t){t&&t.success?e({type:$,burgerIngridientsArr:t.data}):e({type:ee})})).catch((function(e){400===e.status&&console.log({error:e})}))})),v("accessToken")&&e(K())}),[e]);var L=r.a.useCallback((function(){var e="";a.state&&(e=a.state.background&&a.state.background.pathname),O(!1),S(!1),M(!1),P(!1),t.push(e)}),[t,a.state]);r.a.useEffect((function(){var e=function(e){"Escape"===e.key&&L()};return document.addEventListener("keydown",(function(t){e(t)})),function(){document.removeEventListener("keydown",(function(t){e(t)}))}}),[L]);var H="PUSH"===t.action&&a.state&&a.state.background,J=Object(me.jsx)(We,{});return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Oe,{}),Object(me.jsxs)(l.d,{location:H||a,children:[Object(me.jsx)(l.b,{path:"/",exact:!0,children:Object(me.jsx)(Ae,{handleOpenIngridientsModal:function(e){O(!0),x(e)},handleOpenOrderDetailsModal:function(){S(!0)},isSauce:s,isMain:_})}),Object(me.jsx)(l.b,{path:"/ingridients/:id",exact:!0,children:Object(me.jsx)(ta,{})}),Object(me.jsx)(Yt,{path:"/login",children:Object(me.jsx)(it,{})}),Object(me.jsx)(Yt,{path:"/register",children:Object(me.jsx)(lt,{})}),Object(me.jsx)(Yt,{path:"/forgot-password",children:Object(me.jsx)(jt,{})}),Object(me.jsx)(Yt,{path:"/reset-password",children:Object(me.jsx)(Ot,{})}),Object(me.jsx)(Zt,{path:"/profile",exact:!0,children:Object(me.jsx)(vt,{})}),Object(me.jsx)(Zt,{path:"/profile/orders",exact:!0,children:Object(me.jsx)(Bt,{handleOpenOrderModal:function(e){P(!0),T(e)}})}),Object(me.jsx)(Zt,{path:"/profile/orders/:id",exact:!0,children:Object(me.jsx)(fa,{})}),Object(me.jsx)(l.b,{path:"/feed",exact:!0,children:Object(me.jsx)(Qt,{handleOpenFeedModal:function(e){M(!0),q(e)}})}),Object(me.jsx)(l.b,{path:"/feed/:id",exact:!0,children:Object(me.jsx)(ba,{})}),Object(me.jsx)(l.b,{children:Object(me.jsx)(ra,{})})]}),H&&Object(me.jsx)(l.b,{path:"/ingridients/:id",children:Object(me.jsx)(at,{isOpen:m,handleCloseModal:L,children:Object(me.jsx)(qe,{ingridientInfo:g})})}),H&&Object(me.jsx)(l.b,{path:"/feed/:id",children:Object(me.jsx)(at,{isOpen:F,handleCloseModal:L,children:Object(me.jsx)(oa,{feedOrderData:B})})}),H&&Object(me.jsx)(l.b,{path:"/profile/orders/:id",children:Object(me.jsx)(at,{isOpen:D,handleCloseModal:L,children:Object(me.jsx)(ua,{userOrderData:C})})}),Object(me.jsx)(at,{children:J,isOpen:N,handleCloseModal:L})]})},xa=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,204)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},ha=a(38),va=a(56),ya={burgerIngridientsArr:[],burgerIngridientsRequest:!1,burgerIngridientsFailed:!1,burgerConstructorIngridients:[],bun:{},burgerConstructorIngridientsFailed:!1,burgerConstructorIngridientsRequest:!1,order:void 0,orderRequest:!1,orderFailed:!1,totalPrice:0},Na={user:{name:"",email:""},registrationRequest:!1,registratioFailded:!1,loginRequest:!1,loginFailed:!1,loginSuccess:!1,getUserRequest:!1,getUserFailed:!1,tokenRequest:!1,tokenFailed:!1,logoutRequest:!1,logoutFailed:!1,updateUserRequest:!1,updateUserFailed:!1,forgotPasswordRequest:!1,forgotPasswordFailed:!1,forgotPasswordSucces:!1,resetPasswordRequest:!1,resetPasswordFailed:!1,resetPasswordSucces:!1},Sa={wsConnected:!1,wsError:null,feedData:void 0},Ea={wsConnected:!1,wsError:null,ordersData:void 0},Ia=Object(ha.b)({burgerIngridients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(h.a)(Object(h.a)({},e),{},{burgerIngridientsRequest:!0});case $:return Object(h.a)(Object(h.a)({},e),{},{burgerIngridientsFailed:!1,burgerIngridientsArr:t.burgerIngridientsArr,burgerIngridientsRequest:!1});case ee:return Object(h.a)(Object(h.a)({},e),{},{burgerIngridientsFailed:!0,burgerIngridientsRequest:!1});case te:return Object(h.a)(Object(h.a)({},e),{},{burgerConstructorIngridientsRequest:!0});case ae:return Object(h.a)(Object(h.a)({},e),{},{burgerConstructorIngridientsFailed:!1,burgerConstructorIngridients:t.burgerConstructorIngridients,burgerConstructorIngridientsRequest:!1});case ne:return Object(h.a)(Object(h.a)({},e),{},{burgerConstructorIngridientsFailed:!0,burgerConstructorIngridientsRequest:!1});case re:return"bun"===t.ingType?Object(h.a)(Object(h.a)({},e),{},{bun:t.item}):Object(h.a)(Object(h.a)({},e),{},{burgerConstructorIngridients:[].concat(Object(va.a)(e.burgerConstructorIngridients),Object(va.a)(e.burgerIngridientsArr.filter((function(e){return e._id===t.id}))))});case ce:return"bun"===t.ingType?Object(h.a)(Object(h.a)({},e),{},{bun:e.bun._id===t.id?{}:e.bun}):Object(h.a)(Object(h.a)({},e),{},{burgerConstructorIngridients:Object(va.a)(e.burgerConstructorIngridients).filter((function(e,a){return a!==t.ingIndex}))});case se:var a=Object(va.a)(e.burgerConstructorIngridients),n=a[t.dragIndex],r=a[t.replacedIndex];return a[t.replacedIndex]=n,a[t.dragIndex]=r,Object(h.a)(Object(h.a)({},e),{},{burgerConstructorIngridients:a});case ie:return Object(h.a)(Object(h.a)({},e),{},{orderRequest:!0});case oe:return Object(h.a)(Object(h.a)({},e),{},{orderRequest:!1,orderFailed:!1,order:t.order});case de:return Object(h.a)(Object(h.a)({},e),{},{orderRequest:!1,orderFailed:!0});case le:var c=0!==Object.keys(e.bun).length?2*e.bun.price:0,s=e.burgerConstructorIngridients.reduce((function(e,t){return t.price+e}),0);return Object(h.a)(Object(h.a)({},e),{},{totalPrice:s+c});case ue:return Object(h.a)(Object(h.a)({},e),{},{totalPrice:0,burgerConstructorIngridients:[],bun:{}});default:return e}},authUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(h.a)(Object(h.a)({},e),{},{registrationRequest:!0,registratioFailded:!1});case E:return Object(h.a)(Object(h.a)({},e),{},{registrationRequest:!1,registratioFailded:!0});case S:return localStorage.setItem("refreshToken",t.refreshToken),Object(h.a)(Object(h.a)({},e),{},{registrationRequest:!1,registratioFailded:!1,user:t.user});case I:return Object(h.a)(Object(h.a)({},e),{},{getUserRequest:!0,getUserFailed:!1});case T:return Object(h.a)(Object(h.a)({},e),{},{getUserRequest:!1,getUserFailed:!0});case C:return Object(h.a)(Object(h.a)({},e),{},{getUserRequest:!1,getUserFailed:!1,user:t.user});case R:return Object(h.a)(Object(h.a)({},e),{},{loginRequest:!0,loginFailed:!1,loginSuccess:!1});case D:return Object(h.a)(Object(h.a)({},e),{},{loginRequest:!1,loginFailed:!0,loginSuccess:!1});case k:return Object(h.a)(Object(h.a)({},e),{},{loginRequest:!1,loginFailed:!1,loginSuccess:!0,user:t.user});case F:return Object(h.a)(Object(h.a)({},e),{},{tokenRequest:!0});case M:return Object(h.a)(Object(h.a)({},e),{},{tokenFailed:!1,tokenRequest:!1});case A:return Object(h.a)(Object(h.a)({},e),{},{tokenFailed:!0,tokenRequest:!1});case P:return Object(h.a)(Object(h.a)({},e),{},{logoutRequest:!0,logoutFailed:!1});case U:return localStorage.removeItem("refreshToken"),Object(h.a)(Object(h.a)({},e),{},{user:{name:"",email:""},logoutRequest:!1,logoutFailed:!1,loginSuccess:!1});case w:return Object(h.a)(Object(h.a)({},e),{},{logoutRequest:!1,logoutFailed:!0});case W:return Object(h.a)(Object(h.a)({},e),{},{updateUserRequest:!0,updateUserFailed:!1});case Q:return Object(h.a)(Object(h.a)({},e),{},{user:t.user,updateUserRequest:!1,updateUserFailed:!1});case z:return Object(h.a)(Object(h.a)({},e),{},{updateUserRequest:!1,updateUserFailed:!0});case G:return Object(h.a)(Object(h.a)({},e),{},{forgotPasswordRequest:!0,forgotPasswordFailed:!1,forgotPasswordSucces:!1});case B:return Object(h.a)(Object(h.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordFailed:!1,forgotPasswordSucces:!0});case q:return Object(h.a)(Object(h.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordFailed:!0,forgotPasswordSucces:!1});case L:return Object(h.a)(Object(h.a)({},e),{},{resetPasswordRequest:!0,resetPasswordFailed:!1,resetPasswordSucces:!1});case H:return Object(h.a)(Object(h.a)({},e),{},{resetPasswordRequest:!1,resetPasswordFailed:!1,resetPasswordSucces:!0});case J:return Object(h.a)(Object(h.a)({},e),{},{resetPasswordRequest:!1,resetPasswordFailed:!0,resetPasswordSucces:!1});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ct:return{};case Tt:return Object(h.a)(Object(h.a)({},e),{},{wsError:null,wsConnected:!0});case Rt:return console.log(t.payload),Object(h.a)(Object(h.a)({},e),{},{wsError:t.payload,wsConnected:!1});case kt:return Object(h.a)(Object(h.a)({},e),{},{wsError:null,wsConnected:!1});case Dt:return Object(h.a)(Object(h.a)({},e),{},{wsError:null,feedData:t.payload});default:return e}},userOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pt:return{};case Ut:return Object(h.a)(Object(h.a)({},e),{},{wsError:null,wsConnected:!0});case wt:return Object(h.a)(Object(h.a)({},e),{},{wsError:t.payload,wsConnected:!1});case Ft:return Object(h.a)(Object(h.a)({},e),{},{wsError:null,wsConnected:!1});case Mt:return Object(h.a)(Object(h.a)({},e),{},{wsError:null,ordersData:t.payload});default:return e}}}),Ca=a(113),Ta=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ha.c)(Object(ha.a)((pa="".concat(u,"/orders/all"),function(e){var t=null;return function(a){return function(n){var r=e.dispatch,c=n.type,s=n.payload;if(c===Ct&&(t=new WebSocket("".concat(pa))),t&&(t.onopen=function(e){r({type:Tt,payload:e})},t.onerror=function(e){r({type:Rt,payload:e})},t.onmessage=function(e){var t=e.data,a=JSON.parse(t),n=(a.success,Object(Xt.a)(a,["success"]));r({type:Dt,payload:n})},t.onclose=function(e){r({type:kt,payload:e})},"WS_SEND_MESSAGE"===c)){var i=Object(h.a)({},s);t.send(JSON.stringify(i))}a(n)}}}),function(e){return function(t){var a=null;return function(n){return function(r){var c=t.dispatch,s=r.type,i=r.payload,o=v("accessToken");if(s===Pt&&(a=new WebSocket("".concat(e,"?token=").concat(o))),a&&(a.onopen=function(e){c({type:Ut,payload:e})},a.onerror=function(e){c({type:wt,payload:e})},a.onmessage=function(e){var t=e.data,a=JSON.parse(t),n=(a.success,Object(Xt.a)(a,["success"]));if(a.message&&"Invalid or missing token"===a.message){var r=localStorage.getItem("refreshToken");O(r).then((function(e){y("accessToken",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken),c({type:Pt})}))}c({type:Mt,payload:n})},a.onclose=function(e){c({type:Ft,payload:e})},"WS_AUTH_SEND_MESSAGE"===s)){var d=Object(h.a)({},i);a.send(JSON.stringify(d))}n(r)}}}}("".concat(u,"/orders")),Ca.a)),Ra=Object(ha.d)(Ia,Ta);s.a.render(Object(me.jsx)(r.a.StrictMode,{children:Object(me.jsx)(i.a,{children:Object(me.jsx)(o.a,{store:Ra,children:Object(me.jsx)(ga,{})})})}),document.getElementById("root")),xa()},21:function(e,t,a){e.exports={burger_ingridients:"BurgerIngredients_burger_ingridients__3Olqh",parts_box:"BurgerIngredients_parts_box__BIt36",title:"BurgerIngredients_title__3LHDD",parts_container:"BurgerIngredients_parts_container__3dKw5",tabs:"BurgerIngredients_tabs__K7cI3",parts_title_no_margin:"BurgerIngredients_parts_title_no_margin__2IQWY",parts_shell:"BurgerIngredients_parts_shell__2wScz"}},22:function(e,t,a){e.exports={link:"OrderCard_link__3w2KU",card:"OrderCard_card__4_Gyl",box:"OrderCard_box__3MNch",time:"OrderCard_time__lzGIh",burger_info:"OrderCard_burger_info__3kRkx",images_list:"OrderCard_images_list__3EiTE",image_li:"OrderCard_image_li__mDrfP",image:"OrderCard_image__1lQYb",price_box:"OrderCard_price_box__35nll",price:"OrderCard_price__2wr83",code:"OrderCard_code__3gokV",name:"OrderCard_name__2Wmz6",status:"OrderCard_status__2rhvU"}},26:function(e,t,a){e.exports={sign_in:"SignIn_sign_in__FnFkc",container:"SignIn_container__1JjIu",form:"SignIn_form__1_Db5",fieldset:"SignIn_fieldset__2ZTGO",signup_box:"SignIn_signup_box__1JY9n",recover_box:"SignIn_recover_box__l-6Kd SignIn_signup_box__1JY9n",signup_text:"SignIn_signup_text__28Oky",link:"SignIn_link__3d0ft"}},31:function(e,t,a){e.exports={sign_up:"SignUp_sign_up__3eh6S",container:"SignUp_container__31A6D",form:"SignUp_form__1ujMt",fieldset:"SignUp_fieldset__3NmI4",signup_box:"SignUp_signup_box__7VTXg",recover_box:"SignUp_recover_box__1ZGPn SignUp_signup_box__7VTXg",signup_text:"SignUp_signup_text__jsFQJ",link:"SignUp_link__1N9GC"}},32:function(e,t,a){e.exports={reset:"ResetPassword_reset__39cms",container:"ResetPassword_container__2TO5y",form:"ResetPassword_form__1K8Es",fieldset:"ResetPassword_fieldset__3GrLP",signup_box:"ResetPassword_signup_box__6HvAZ",recover_box:"ResetPassword_recover_box__RUMBG ResetPassword_signup_box__6HvAZ",signup_text:"ResetPassword_signup_text__3KLHk",link:"ResetPassword_link__3x_0E"}},33:function(e,t,a){e.exports={route_box:"RouteBox_route_box__18FxR",link:"RouteBox_link__2OEoQ",link_active:"RouteBox_link_active__3AGLF",text:"RouteBox_text__qpLc4"}},34:function(e,t,a){e.exports={recover:"RecoverPassword_recover__1oGbg",container:"RecoverPassword_container__i8SJ6",form:"RecoverPassword_form__1n3Kl",fieldset:"RecoverPassword_fieldset__wpd2R",signup_box:"RecoverPassword_signup_box__1_PW3",recover_box:"RecoverPassword_recover_box__3b8sK RecoverPassword_signup_box__1_PW3",signup_text:"RecoverPassword_signup_text__3Ca8T",link:"RecoverPassword_link__f2Gin"}},35:function(e,t,a){e.exports={profile:"Profile_profile__1GJ1l",container:"Profile_container__1J-2Z",fieldset:"Profile_fieldset__r-Kr9",buttons:"Profile_buttons__1V4Sk",buttons_hide:"Profile_buttons_hide__16eNQ"}},39:function(e,t,a){e.exports={order:"OrderDetails_order__2J7Ew",number:"OrderDetails_number__1fUGK",id:"OrderDetails_id__Vy6ez",notification:"OrderDetails_notification__1SAbG",message:"OrderDetails_message__1zv_-",message_wait:"OrderDetails_message_wait__3MqfS",loading:"OrderDetails_loading__3QpQf"}},42:function(e,t,a){e.exports={burger_constructor:"BurgerConstructor_burger_constructor__2LiuM",general_price:"BurgerConstructor_general_price__31vvD",price:"BurgerConstructor_price__P0f6H",elements_container:"BurgerConstructor_elements_container__3qNQx",box:"BurgerConstructor_box__17e2a","constructor-element__row":"BurgerConstructor_constructor-element__row__d2ohv",first_card:"BurgerConstructor_first_card__1HYX4",last_card:"BurgerConstructor_last_card__10Xfv"}},43:function(e,t,a){e.exports={modal:"Modal_modal__XBB_o",modal_hidden:"Modal_modal_hidden__3zZEb",modal_wrapper:"Modal_modal_wrapper__2sfBS",header:"Modal_header__wTniz",title:"Modal_title__1S0aZ",closeButton:"Modal_closeButton__3o6LY"}},47:function(e,t,a){e.exports={card:"Card_card__2mFjH",price_box:"Card_price_box__2motv",price:"Card_price__hWsmx"}},55:function(e,t,a){e.exports={not_found:"NotFoundPage_not_found__3b_kA",go_back:"NotFoundPage_go_back__BBc0f"}},87:function(e,t,a){e.exports={orders:"Orders_orders__3uNIZ",container:"Orders_container__2Zpx1"}}},[[196,1,2]]]);
//# sourceMappingURL=main.c613337f.chunk.js.map